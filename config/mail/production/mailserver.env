# =============================================================================
# docker-mailserver 生产环境配置
# =============================================================================
# 此文件由 docker-compose.yml 加载
# 敏感配置（密码等）从 .env 文件读取
# 域名配置从 .env.domains 文件读取（由 deploy.sh 生成）
# =============================================================================

# --- General ---
# 时区设置
TZ=Asia/Shanghai

# --- 主机名配置 ---
# OVERRIDE_HOSTNAME 会从 .env.domains 中的 MAIL_SERVER 变量读取
# 这个变量在 docker-compose.yml 的 env_file 中加载

# --- Security ---
# 启用 SpamAssassin 垃圾邮件过滤
ENABLE_SPAMASSASSIN=1
# 启用 ClamAV 病毒扫描
ENABLE_CLAMAV=1
# 启用 Fail2Ban 防暴力破解
ENABLE_FAIL2BAN=1
# Fail2Ban 白名单 - 忽略 Docker 网络和本地地址
FAIL2BAN_IGNOREIP=127.0.0.1/8 172.16.0.0/12 192.168.0.0/16
# 禁用 Postgrey 灰名单（可能导致邮件延迟）
ENABLE_POSTGREY=0
# 禁用 SASLAUTHD - 我们使用 Dovecot SQL 认证
ENABLE_SASLAUTHD=0
# 启用 DKIM 签名
ENABLE_DKIM=1

# --- SSL ---
# 暂时禁用 SSL（首次部署）
# 后续可以启用 Let's Encrypt 证书
# SSL_TYPE=letsencrypt
# SSL_TYPE=self-signed
SSL_TYPE=

# --- Other ---
# 允许用户创建 Sieve 过滤规则
ENABLE_MANAGESIEVE=1
# 默认用户配额
DEFAULT_USER_QUOTA=1G
# 日志级别
LOG_LEVEL=info

# --- Postfix 配置 ---
# 允许 Docker 网络内的连接
PERMIT_DOCKER=network